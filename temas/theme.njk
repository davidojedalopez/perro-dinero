{% set theme = themes[theme_key] %}
{% set relatedPosts = (collections.postsByTheme[theme.slug] or []) | sort(true, false, 'data.published_at') %}

<h1 class="text-accent-500 dark:text-accent-dark-500 font-black text-3xl mb-8">{{ theme.title }}</h1>

<section class="mb-10">
  <h2 class="text-2xl font-semibold mb-3">Definición</h2>
  <p class="text-lg">{{ theme.definition }}</p>
</section>

<section class="mb-10">
  <h2 class="text-2xl font-semibold mb-3">Enlaces clave</h2>
  <ul class="list-disc list-inside space-y-2">
    {% for keyLink in theme.key_links %}
      <li><a href="{{ keyLink | url }}">{{ keyLink }}</a></li>
    {% endfor %}
  </ul>
</section>

<section class="flex flex-col space-y-8 mb-8">
  <h2 class="text-2xl font-semibold">Posts relacionados ({{ relatedPosts | length }})</h2>
  {% if relatedPosts | length %}
    <div class="pb-2 px-4 sm:px-6 lg:pb-4 lg:px-8">
      <div class="pt-4 grid gap-16 lg:grid-cols-2 lg:gap-x-5 lg:gap-y-12">
        {% for post in relatedPosts %}
          {% include "postitem.njk" %}
        {% endfor %}
      </div>
    </div>
  {% else %}
    <p class="text-gray-600 dark:text-gray-300">Aún no hay posts relacionados con este tema.</p>
  {% endif %}
</section>
