<!doctype html>
<html lang="es" class="relative h-full">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ renderData.title or title or metadata.title }}</title>
    <meta name="title" content="{{ renderData.title or title or metadata.title }}">
    <meta name="description" content="{{ renderData.description or description or metadata.description }}">

    <meta name="author" content="{{ metadata.author.name }}">
    <link type="text/plain" rel="author" href="/humans.txt" />

    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ metadata.url }}{{ page.url }}">
    <meta property="og:title" content="{{ renderData.title or title or metadata.title }}">
    <meta property="og:description" content="{{ renderData.description or description or metadata.description }}">
    <meta property="og:image" content="{{ metadata.url }}/{{ cover_path or metadata.default_cover }}">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ metadata.url }}{{ page.url }}">
    <meta property="twitter:title" content="{{ renderData.title or title or metadata.title }}">
    <meta property="twitter:description" content="{{ renderData.description or description or metadata.description }}">
    <meta property="twitter:image" content="{{ metadata.url }}/{{ cover_path or metadata.default_cover }}">

    <meta name="twitter:site" content="@PerroDinero">
    <meta name="twitter:creator" content="@PerroDinero">

    <meta name="theme-color" content="#F3CA3E">

    {% if canonical_url %}
      <link rel="alternate" hreflang="en" href="{{ canonical_url }}" />
    {% endif %}

    {# For Algolia Crawler #}
    {% if published_at %}
      <meta property="article:published_time" content="{{ published_at | getTime }}">
    {% endif %}
    {% if last_updated_at %}
      <meta property="article:modified_time" content="{{ last_updated_at | getTime }}">
    {% endif %}
    <meta property="article:author" content="{{ metadata.author.name }}">
    {% if tags %}
      {% for tag in tags %}
        {% if tag !== 'posts' and tag !== 'books' %}
          <meta property="article:tag" content="{{ tag }}">
        {% endif %}
      {% endfor %}
    {% endif %}

    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com" rel="preconnect" crossorigin>

    <script>
      if(localStorage.getItem('dark-mode-enabled') === 'true' || (window.matchMedia('(prefers-color-scheme: dark)').matches && !localStorage.getItem('dark-mode-enabled'))) {
        document.documentElement.classList.add('dark');
      }
    </script>
    <link rel="stylesheet" type="text/css" href="{{ '/assets/main.css' | url }}" >
    <link rel="alternate" href="{{ metadata.feed.path | url }}" type="application/atom+xml" title="{{ metadata.title }}">


    <meta name="apple-mobile-web-app-capable" content="yes">

    <link rel="icon" type="image/png" sizes="32x32" href="{{ '/img/favicon/favicon-32x32.png' | url }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ '/img/favicon/favicon-16x16.png' | url }}">
    <link rel="apple-touch-icon" href="{{ '/img/favicon/manifest-icon-192.png' | url }}" sizes="192x192">
    <link rel="apple-touch-icon" href="{{ '/img/favicon/manifest-icon-512.png' | url }}" sizes="512x512">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2048-2732.jpg' | url }}" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2732-2048.jpg' | url }}" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1668-2388.jpg' | url }}" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2388-1668.jpg' | url }}" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1536-2048.jpg' | url }}" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2048-1536.jpg' | url }}" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1668-2224.jpg' | url }}" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2224-1668.jpg' | url }}" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1620-2160.jpg' | url }}" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2160-1620.jpg' | url }}" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1284-2778.jpg' | url }}" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2778-1284.jpg' | url }}" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1170-2532.jpg' | url }}" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2532-1170.jpg' | url }}" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1125-2436.jpg' | url }}" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2436-1125.jpg' | url }}" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1242-2688.jpg' | url }}" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2688-1242.jpg' | url }}" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-828-1792.jpg' | url }}" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1792-828.jpg' | url }}" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1242-2208.jpg' | url }}" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-2208-1242.jpg' | url }}" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-750-1334.jpg' | url }}" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1334-750.jpg' | url }}" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-640-1136.jpg' | url }}" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="{{ '/img/favicon/apple-splash-1136-640.jpg' | url }}" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">

    {% structured_data renderData.structuredData or structuredData or metadata.structuredData %}

    <link rel="manifest" href="{{ '/manifest.json' | url }}" >
  </head>
  <body class="bg-background dark:bg-background-dark mx-auto">
    <script>
      if('serviceWorker' in navigator) {
        document.addEventListener('DOMContentLoaded', (event) => {
          navigator.serviceWorker.register('{{ "/service-worker.js" | url }}');
        });
      }
    </script>

    <header class="py-4 px-6 lg:py-8 lg:px-28 grid gap-y-4 items-center">

      {% include "calls_to_action/ebook_presale_banner.njk" %}

      <a href="/" class="no-underline inline-block" style="grid-area: home">
        <span class="sr-only">Link a la p√°gina principal</span>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 609.26 113.24" class="w-9/12 fill-current dark:text-primary-dark"><defs><style>.cls-1{fill:#408244;}</style></defs><g  data-name="Capa 2"><g  data-name="Capa 1"><path d="M28.6,25.18a14.73,14.73,0,0,0-12.82,6.9l-.58-5.74H0v86.9H16.42V84.06a14.6,14.6,0,0,0,12.3,6.21q10,0,15.11-7.89T48.9,59.69V54.88q-.1-15.09-5.19-22.39T28.6,25.18Zm3.94,34.51q0,8.72-1.88,12.82T23.9,76.63q-5.28,0-7.48-4.06V43.16a7.8,7.8,0,0,1,7.37-4.23c3.17,0,5.42,1.25,6.75,3.77s2,6.8,2,12.88Z"/><path d="M82.49,25.18q-12.12,0-18.62,8.06t-6.5,22.92v5q0,14,7.08,21.59t19.73,7.54a30.1,30.1,0,0,0,12.47-2.58,21.31,21.31,0,0,0,8.76-6.76L99,71a18.47,18.47,0,0,1-13.75,5.62c-3.79,0-6.59-1.07-8.41-3.23S74,67.84,73.73,63.17h32.66V55.12q-.11-14.82-6.09-22.38T82.49,25.18Zm7.78,26.57H73.85c.23-4.53,1-7.81,2.29-9.87s3.37-3.07,6.24-3.07,4.87,1,6,2.9,1.78,4.78,1.86,8.53Z"/><path d="M131.57,33.12l-.46-6.78H115.62V89.11h16.47V47.63q2.39-5.93,9.11-5.92l5.45.46.18-16.24a11.57,11.57,0,0,0-4.53-.75Q135.46,25.18,131.57,33.12Z"/><path d="M171,33.12l-.46-6.78H155V89.11h16.47V47.63q2.39-5.93,9.11-5.92l5.45.46.18-16.24a11.57,11.57,0,0,0-4.53-.75Q174.85,25.18,171,33.12Z"/><path d="M215.81,25.18q-11.9,0-18.63,8.12t-6.73,22.39v4q0,14.4,6.7,22.48t18.77,8.1q12,0,18.68-8.07t6.67-22.39v-4q0-14.39-6.73-22.51T215.81,25.18Zm9,37.41q-.63,14.05-8.93,14-9,0-9-16.82V55.69q0-8.58,2.35-12.73c1.57-2.77,3.74-4.15,6.53-4.15A7.38,7.38,0,0,1,222.53,43q2.39,4.14,2.38,12.73Z"/><path d="M309.15,31.44q-4.81-6.26-12.07-6.26-10,0-15.2,7.6t-5.22,23v4.75q.12,14.63,5.31,22.17t15,7.54q8,0,13-7.54l.75,6.38h14.91V0H309.15Zm0,40.78a8,8,0,0,1-7.37,4.36c-3.13,0-5.36-1.23-6.67-3.69s-2-6.78-2-13V55.58q0-9.34,2.08-13a7.07,7.07,0,0,1,6.62-3.65,7.82,7.82,0,0,1,7.31,4.64Z"/><rect x="338.5" y="26.34" width="16.48" height="62.77"/><path d="M346.68,1.39a8.77,8.77,0,0,0-6.5,2.44,8.48,8.48,0,0,0-2.43,6.26,8.67,8.67,0,0,0,2.4,6.27,9.81,9.81,0,0,0,13.06,0,8.67,8.67,0,0,0,2.4-6.27,8.48,8.48,0,0,0-2.43-6.26A8.77,8.77,0,0,0,346.68,1.39Z"/><path d="M397.73,25.18a17.41,17.41,0,0,0-14.56,7.36l-.46-6.2H367.28V89.11h16.47V43.51c1.66-3.06,4-4.58,7-4.58q4,0,5.6,2.4c1.06,1.61,1.6,4.19,1.6,7.75v40h16.47V47.86Q413.92,25.18,397.73,25.18Z"/><path d="M449.83,25.18q-12.13,0-18.63,8.06t-6.49,22.92v5q0,14,7.07,21.59t19.73,7.54A30.1,30.1,0,0,0,464,87.69a21.31,21.31,0,0,0,8.76-6.76L466.3,71a18.46,18.46,0,0,1-13.75,5.62c-3.79,0-6.59-1.07-8.41-3.23s-2.84-5.56-3.07-10.23h32.66V55.12q-.12-14.82-6.09-22.38T449.83,25.18Zm7.77,26.57H441.18c.23-4.53,1-7.81,2.29-9.87s3.38-3.07,6.24-3.07,4.87,1,6,2.9,1.78,4.78,1.86,8.53Z"/><path d="M498.9,33.12l-.46-6.78H483V89.11h16.48V47.63q2.37-5.93,9.11-5.92l5.45.46.17-16.24a11.55,11.55,0,0,0-4.52-.75Q502.79,25.18,498.9,33.12Z"/><path d="M543.75,25.18q-11.89,0-18.62,8.12T518.4,55.69v4q0,14.4,6.7,22.48t18.76,8.1q12,0,18.68-8.07t6.68-22.39v-4q0-14.39-6.73-22.51T543.75,25.18Zm9,37.41q-.64,14.05-8.94,14-9,0-9-16.82V55.69q0-8.58,2.35-12.73c1.57-2.77,3.74-4.15,6.53-4.15A7.41,7.41,0,0,1,550.48,43q2.37,4.14,2.38,12.73Z"/><rect class="fill-current dark:text-accent-dark-500 text-accent-500" x="585.77" y="65.6" width="23.49" height="23.49"/></g></g></svg>
      </a>

      <div style="grid-area: search">
        <label class="sr-only" for="search-posts">Buscar en posts</label>
        <input id="search-posts" type="search" placeholder="üîç Buscar en posts..." class="w-full px-4 py-2 rounded-full border-accent-500 dark:border-accent-dark-500 border-l-2 border-b-2 placeholder-accent-500 dark:placeholder-accent-dark-500 placeholder-opacity-100" />
      </div>

      {% include "dark_mode_toggle.njk" %}
    </header>

    <main class="w-10/12 md:w-9/12 mx-auto">
      {{ content | safe }}
    </main>

    <footer class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 justify-around items-start sm:items-end p-4 bg-accent-100 dark:bg-foreground-dark absolute inset-x-0">
      <a href="/portafolio/" class="no-underline hover:animate-scaleUp">
        <div class="flex sm:flex-col place-items-center space-x-2 sm:space-x-0">
          <span class="text-xl xl:text-3xl">üìà</span>
          <p class="text-xl xl:text-2xl">Portafolio</p>
        </div>
      </a>
      <a href="/posts/" class="no-underline hover:animate-scaleUp">
        <div class="flex sm:flex-col place-items-center space-x-2 sm:space-x-0">
          <span class="text-xl xl:text-3xl">üìù</span>
          <p class="text-xl xl:text-2xl">Posts</p>
        </div>
      </a>
      <a href="https://newsletter.perrodinero.blog/" class="no-underline hover:animate-scaleUp">
        <div class="flex sm:flex-col place-items-center space-x-2 sm:space-x-0">
          <span class="text-xl xl:text-3xl">üì¨</span>
          <p class="text-xl xl:text-2xl">Newsletter</p>
        </div>
      </a>
      <a href="https://twitter.com/PerroDinero" class="no-underline hover:animate-scaleUp">
        <span class="sr-only">Enlace a cuenta de Perro Dinero en Twitter</span>
        <div class="flex sm:flex-col place-items-center space-x-2 sm:space-x-0">
          <svg class="fill-current text-twitter w-6 xl:w-8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="45"	viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g>	<g>		<path d="M512,97.248c-19.04,8.352-39.328,13.888-60.48,16.576c21.76-12.992,38.368-33.408,46.176-58.016			c-20.288,12.096-42.688,20.64-66.56,25.408C411.872,60.704,384.416,48,354.464,48c-58.112,0-104.896,47.168-104.896,104.992			c0,8.32,0.704,16.32,2.432,23.936c-87.264-4.256-164.48-46.08-216.352-109.792c-9.056,15.712-14.368,33.696-14.368,53.056			c0,36.352,18.72,68.576,46.624,87.232c-16.864-0.32-33.408-5.216-47.424-12.928c0,0.32,0,0.736,0,1.152			c0,51.008,36.384,93.376,84.096,103.136c-8.544,2.336-17.856,3.456-27.52,3.456c-6.72,0-13.504-0.384-19.872-1.792			c13.6,41.568,52.192,72.128,98.08,73.12c-35.712,27.936-81.056,44.768-130.144,44.768c-8.608,0-16.864-0.384-25.12-1.44			C46.496,446.88,101.6,464,161.024,464c193.152,0,298.752-160,298.752-298.688c0-4.64-0.16-9.12-0.384-13.568			C480.224,136.96,497.728,118.496,512,97.248z"/>	</g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
          <p class="text-xl xl:text-2xl">Twitter</p>
        </div>
      </a>
      <a href="https://www.reddit.com/r/MexicoFinanciero/" class="no-underline hover:animate-scaleUp">
        <div class="flex sm:flex-col place-items-center space-x-2 sm:space-x-0">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 xl:w-8 fill-current text-reddit" viewBox="0 0 24 24"><path d="M24 11.779c0-1.459-1.192-2.645-2.657-2.645-.715 0-1.363.286-1.84.746-1.81-1.191-4.259-1.949-6.971-2.046l1.483-4.669 4.016.941-.006.058c0 1.193.975 2.163 2.174 2.163 1.198 0 2.172-.97 2.172-2.163s-.975-2.164-2.172-2.164c-.92 0-1.704.574-2.021 1.379l-4.329-1.015c-.189-.046-.381.063-.44.249l-1.654 5.207c-2.838.034-5.409.798-7.3 2.025-.474-.438-1.103-.712-1.799-.712-1.465 0-2.656 1.187-2.656 2.646 0 .97.533 1.811 1.317 2.271-.052.282-.086.567-.086.857 0 3.911 4.808 7.093 10.719 7.093s10.72-3.182 10.72-7.093c0-.274-.029-.544-.075-.81.832-.447 1.405-1.312 1.405-2.318zm-17.224 1.816c0-.868.71-1.575 1.582-1.575.872 0 1.581.707 1.581 1.575s-.709 1.574-1.581 1.574-1.582-.706-1.582-1.574zm9.061 4.669c-.797.793-2.048 1.179-3.824 1.179l-.013-.003-.013.003c-1.777 0-3.028-.386-3.824-1.179-.145-.144-.145-.379 0-.523.145-.145.381-.145.526 0 .65.647 1.729.961 3.298.961l.013.003.013-.003c1.569 0 2.648-.315 3.298-.962.145-.145.381-.144.526 0 .145.145.145.379 0 .524zm-.189-3.095c-.872 0-1.581-.706-1.581-1.574 0-.868.709-1.575 1.581-1.575s1.581.707 1.581 1.575-.709 1.574-1.581 1.574z"/></svg>
          <p class="text-xl xl:text-2xl">Reddit</p>
        </div>
      </a>
      <a href="{{ '/feed.xml' | url }}" class="no-underline hover:animate-scaleUp">
        <div class="flex sm:flex-col place-items-center space-x-2 sm:space-x-0">
          <svg class="fill-current text-yellow-500 w-5 xl:w-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>√çcono de RSS que te lleva al archivo feed.xml</title><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg>
          <p class="text-xl xl:text-2xl">RSS</p>
        </div>
      </a>
      <div class="hidden md:inline"></div>
    </footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@algolia/algoliasearch-netlify-frontend@0/dist/algoliasearchNetlify.js"></script>
    <script type="text/javascript">
      algoliasearchNetlify({
        appId: '0XVEQ8TLK3',
        apiKey: 'fef279042309319fe04cbb7778b5e67f',
        siteId: '484d9a9f-dc24-4d30-90c4-142ae40c60b7',
        branch: 'master',
        selector: 'div#search',
        analytics: true,
        hitsPerPage: 5,
        placeholder: "Buscar en posts...",
        openOnFocus: true,
        poweredBy: true,
        color: '#1D853B'
      });
    </script>

    <script src="{{ '/assets/main.js' | url }}"></script>

    <script data-name="BMC-Widget" data-cfasync="true" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js"
      data-id="perrodinero" data-description="¬°Ap√≥yame para seguir creando contenido de calidad!" data-message=""
      data-color="#F3CA3E" data-position="Right"
      data-x_margin="18" data-y_margin="18" defer>
    </script>
    <script async>
      "use strict";!function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}(Element.prototype);const createGumroadOverlay=function(){function t(){window.GumroadOverlay||(window.GumroadOverlay=new a)}class e{setEnvironment(){this.environment="production",this[this.environment]=!0,this.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}startNodeAdditionObserver(){MutationObserver&&(this.nodeAdditionObserver=new MutationObserver(function(t){for(var e=0;e<t.length;e++)for(var i=0;i<t[e].addedNodes.length;i++)this.nodeAdditionCallback&&this.nodeAdditionCallback(t[e].addedNodes[i])}.bind(this)),this.nodeAdditionObserver.observe(document.body,{childList:!0,subtree:!0}))}get affiliateProductUrlRegExp(){return/.+\/a\/(?<affiliateId>.+)\/.+/}getAffiliateIdFromPageUrl(){const t=new URLSearchParams(window.location.search),e=["affiliate_id","a"];let i=null;for(let a of e){const e=t.get(a);if(e){i=e;break}}return i}transformToCanonicalProductUrl(t){const e=t.match(this.affiliateProductUrlRegExp),i=this.getAffiliateIdFromPageUrl();if(null===e&&null===i)return t;if(null!==e){const i=e.groups,a=/\/a\/.+(\/.+)/,r=(t,e)=>`/l${e}`,n=new URL(t.replace(a,r));return n.searchParams.append("affiliate_id",i.affiliateId),n.href}if(null!==i){const e=new URL(t);return e.searchParams.append("affiliate_id",i),e.href}}}class i extends e{constructor(t,e){super(),this.setEnvironment(),this.validParams=["locale","referrer","wanted","email","gift","monthly","quarterly","biannually","yearly","duration","recommended_by","quantity","price","variant","affiliate_id","tier"],this.preserveRawValueParams=["variant"],this.element=t,this.manager=e,this.vars={as_modal:!0,referrer:encodeURIComponent(document.referrer+"/"+window.location.search.substring(1)),url_parameters:{source_url:encodeURIComponent(window.location.href)}};const i=this.element.getAttribute("href");if(i){const t=this.transformToCanonicalProductUrl(i);i!==t&&this.element.setAttribute("href",t)}this.validateUrl(),this.vars.affiliate_id&&(this.vars.url_parameters.affiliate_id=this.vars.affiliate_id)}makeActiveLink(){var t=document.createElement("span"),e=this,i=!1;if(t.className=this.manager.logoClassName,!this.element.getAttribute("data-gumroad-ignore")){if(this.manager.hasClass(this.element,"gumroad-button")){if(this.element.hasChildNodes())for(var a=0;a<this.element.childNodes.length;a++){var r=this.element.childNodes[a];"span"===r.nodeName.toLowerCase()&&this.manager.hasClass(r,this.manager.logoClassName)&&(i=!0)}i||this.element.appendChild(t)}this.element.getAttribute("data-gumroad-single-product")&&(this.manager.isSingleProductMode=!0),this.origin!==this.manager.domain&&(this.element.target="_blank"),this.element.onclick=function(t){t.preventDefault(),e.manager.showInIframe(e)}}}setUrlVars(t){if(t){var e=t.split("&");if(e.length)for(var i=0;i<e.length;i++)if(e[i]){var a=decodeURIComponent(e[i]).split("="),r=e[i].split("=")[1];if(2===a.length){var n=a[0],o=-1!==this.preserveRawValueParams.indexOf(n)?r:a[1];this.validParams.indexOf(a[0])>-1?this.vars[n]=o:this.vars.url_parameters[n]=o}}}}validateUrl(){for(var t=this.element.href.split("?"),e=t[0],i=0;i<this.manager.productMatches.length;i++){const a=new RegExp("^"+this.manager.productMatches[i],"i");if(a.test(e)){const i=e.replace(a,"").split("/");return this.vars.original_url=this.element.href,this.vars.hostname=new URL(e).hostname,this.vars.permalink=i[0],"function"==typeof window.URLSearchParams&&(this.vars.offerCodeName=new URLSearchParams(this.element.search).get("offer_code")),!this.vars.offerCodeName&&i[1]&&i[1].length>0&&(this.vars.offerCodeName=i[1]),this.setUrlVars(t[1]),this.manager.links.push(this),this.manager.addPermalink(this.vars.hostname,this.vars.permalink),this.makeActiveLink(),!0}}}}class a extends e{constructor(){super(),this.setEnvironment(),this.links=[],this.allPermalinks=new Map,window.addEventListener?window.addEventListener("message",function(t){this.gotMessage(t)}.bind(this),!1):window.attachEvent("onmessage",function(t){this.gotMessage(t)}.bind(this),!1),this.setDomain(),this.insertStylesheet(),this.insertLoadingIndicator(),this.bindKeys(),this.addLinks(),this.domain!==this.origin&&1===this.links.length&&(this.isSingleProductMode=!0),this.createIframe(),this.startNodeAdditionObserver(),this.maxWindowHeight=/iPhone/.test(navigator.userAgent)?window.innerHeight:null}get logoClassName(){return"gumroad-button-logo"}setDomain(){const t=document.querySelector("script[src*='/js/gumroad.js']");t&&(this.domain=new URL(t.src).origin,this.productMatches.push(`${this.domain}/l/`),"https://gumroad.com"===this.domain&&(this.domain="https://app.gumroad.com"),this.productMatches=[...new Set(this.productMatches)])}addLinks(){for(var t=document.querySelectorAll("a:not(.gr-overlay-disabled),area"),e=this,a=0;a<t.length;a++)new i(t[a],e)}addPermalink(t,e){this.allPermalinks.has(t)||this.allPermalinks.set(t,new Set),this.allPermalinks.get(t).add(e)}append(t,e){e=e||"body",document.getElementsByTagName(e)[0].appendChild(t)}askForProduct(){if(this.currentLink){var t=this.getGoogleAnalyticsClientId();t&&(this.currentLink.vars.googleAnalyticsClientId=t),this.messageIframe({overlayMethod:"getProduct",overlayArgs:this.currentLink.vars})}}getGoogleAnalyticsClientId(){if("string"==typeof window.GoogleAnalyticsObject&&"function"==typeof window[window.GoogleAnalyticsObject]&&"function"==typeof window[window.GoogleAnalyticsObject].getAll){var t=window[window.GoogleAnalyticsObject].getAll(),e="object"==typeof t?t[0]:null;if("object"==typeof e&&"function"==typeof e.get)return e.get("clientId")}}bindKeys(){document.onkeydown=function(t){"Escape"===t.key&&(this.minimizeIframe(),this.messageIframe({overlayMethod:"unmount"}))}.bind(this)}buildIframeSrc(){var t=(this.domain?this.domain:"")+"/overlay_page",e=[];if(this.isSingleProductMode&&e.push("single_product_mode=true"),this.currentLink)for(var i in this.currentLink.vars)this.currentLink.vars.hasOwnProperty(i)&&e.push(i+"="+this.currentLink.vars[i]);e.length>0&&(t+="?"+e.join("&"));const a=2e3,r=this.allPermalinksToQueryParams(a-t.length);if(r.length>0){const e=t.includes("?")?"&":"?";t+=e+r}return t}allPermalinksToQueryParams(t){let e=t,i={};return this.allPermalinks.forEach(((t,a)=>{const r=`all_permalinks[${encodeURIComponent(a)}]`,n=[...t].reduce(((t,i)=>r.length+t.length+i.length+2<e?(t.length>0&&(t+=","),`${t}${i}`):t),"");n.length>0&&(i[r]=n,e-=r.length-n.length-1)})),new URLSearchParams(i).toString()}setScrollContainerStyle(t){t||(t={width:"0px",height:"0px"}),this.scrollContainer&&(this.scrollContainer.style="max-width: 100vw;max-height: 100vh;width:"+t.width+";height:"+t.height)}restoreBodyScroll(){document.getElementsByTagName("body")[0].classList.remove("gumroad-overflow-hidden")}disableBodyScroll(){document.getElementsByTagName("body")[0].classList.add("gumroad-overflow-hidden")}createIframe(){var t=this;this.removeIframe(),this.scrollContainer=document.createElement("div"),this.scrollContainer.className="gumroad-scroll-container",this.setScrollContainerStyle(),this.append(this.scrollContainer),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("allowFullScreen","allowfullscreen"),this.iframe.setAttribute("allowPaymentRequest","allowpaymentrequest"),this.iframe.setAttribute("title","Gumroad presale"),this.iframe.allowtransparency=!0,this.iframe.className="gumroad-overlay-iframe",this.iframe.onload=function(){t.setupMessaging()},this.iframe.src=this.buildIframeSrc(),this.scrollContainer.append(this.iframe)}gotMessage(t){var e={};if(t.data)try{e=JSON.parse(t.data)}catch(t){}e.parentMethod&&this[e.parentMethod]&&this[e.parentMethod](e.parentArgs)}handshake(){this.iframeReady||(this.iframeReady=!0,clearInterval(this.handshakeTimer),delete this.handshakeTimer,this.messagingSetupCallback())}hasClass(t,e){return t.classList.toString().split(/\s+/).indexOf(e)>-1}hideLoadingIndicator(){this.setOpacity(this.loadingIndicator,0)}insertLoadingIndicator(){this.loadingIndicator=document.createElement("div"),this.loadingIndicator.className="gumroad-loading-indicator",this.loadingIndicator.appendChild(document.createElement("i")),this.append(this.loadingIndicator)}insertStylesheet(){var t='@font-face { font-family: "Mabry Pro"; src: url("https://assets.gumroad.com/assets/mabry-regular-pro-2987dea5e28da4cf6ec452e081243d69aa29503e7f870eddabcb2225dac42343.woff2"); } :root { --gumroad-logo: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTU3IiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSIwIDAgMTU3IDIyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNOTMuMjkyOSAwLjc3ODMyQzkwLjA1MDIgMC43NzgzMiA4Ni44ODAxIDMuNTgzMjYgODYuNTE1OCA3LjYzNjEzVjEuMTEyNDNIODEuODU4OVYyMC43ODNIODYuNTcyN1YxMS4yNjE3Qzg2LjU3MjcgOC41OTQ1MyA4OC41NTE2IDQuODMyMTggOTMuMjkyOSA0LjgzMjE4VjAuNzc4MzJaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTQyLjc3OCAxNy42MzQxVjQuMTU3MzlIMTQ1LjUwOUMxNDkuMTUgNC4xNTczOSAxNTIuMTA4IDYuMzMxMDUgMTUyLjEwOCAxMC43ODcxQzE1Mi4xMDggMTUuMjQzMSAxNDkuMTUgMTcuNjM0MSAxNDUuNTA5IDE3LjYzNDFIMTQyLjc3OFpNMTM4LjExMyAyMC43ODU5SDE0Ni4wNzhDMTUwLjk3IDIwLjc4NTkgMTU3IDE3Ljc0MjggMTU3IDEwLjc4NzFDMTU3IDMuOTQwMDIgMTUwLjk3IDEuMTE0MjYgMTQ2LjA3OCAxLjExNDI2SDEzOC4xMTNWMjAuNzg1OVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMjAuMjI0IDExLjAwNThDMTIwLjIyNCA3LjQxOTIyIDEyMi4xNTggNC40ODQ3NyAxMjUuMzQ0IDQuNDg0NzdDMTI4LjQxNiA0LjQ4NDc3IDEzMC4xMjMgNy40MTkyMiAxMzAuMTIzIDExLjAwNThDMTMwLjEyMyAxNC41OTIzIDEyOC40MTYgMTcuNTI2NyAxMjUuMzQ0IDE3LjUyNjdDMTIyLjE1OCAxNy41MjY3IDEyMC4yMjQgMTQuNTkyMyAxMjAuMjI0IDExLjAwNThaTTExNS40NDUgMTEuMjIzMUMxMTUuNDQ1IDE3LjA5MiAxMTguNjMxIDIxLjIyMiAxMjMuNjM3IDIxLjIyMkMxMjcuMjc4IDIxLjIyMiAxMjkuNDQgMTguOTM5NiAxMzAuNTc4IDE1LjI0NDRWMjAuNzg3MkgxMzUuMjQyVjEuMTE1NkgxMzAuNTc4VjYuMzMyMzlDMTI5LjU1NCAyLjg1NDUzIDEyNy4zOTIgMC43ODk1NTEgMTIzLjk3OSAwLjc4OTU1MUMxMTguODU5IDAuNzg5NTUxIDExNS40NDUgNS4yNDU1NiAxMTUuNDQ1IDExLjIyMzFaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOS4yMTU5OSAyMS4yMjJDMy40MTMzMyAyMS4yMjIgMCAxNi43NjYgMCAxMS4yMjMxQzAgNS40NjI5MiAzLjc1NDY2IDAuNzg5NTUxIDEwLjkyMjcgMC43ODk1NTFDMTguMzE4MiAwLjc4OTU1MSAyMC44MjEzIDUuNTcxNjEgMjAuOTM1MSA4LjI4ODY4SDE1LjU4NzVDMTUuNDczOCA2Ljc2NzEyIDE0LjEwODQgNC40ODQ3OCAxMC44MDg5IDQuNDg0NzhDNy4yODE3NyA0LjQ4NDc4IDUuMDA2MjIgNy40MTkyMiA1LjAwNjIyIDExLjAwNThDNS4wMDYyMiAxNC41OTIzIDcuMjgxNzcgMTcuNTI2NyAxMC44MDg5IDE3LjUyNjdDMTMuOTk0NiAxNy41MjY3IDE1LjM2IDE1LjEzNTcgMTUuOTI4OSAxMi43NDQ3SDEwLjgwODlWMTAuNzg4NEgyMS41NTI0VjIwLjc4NzJIMTYuODM5MVYxNC40ODM2QzE2LjQ5NzggMTYuNzY2IDE1LjAxODYgMjEuMjIyIDkuMjE1OTkgMjEuMjIyWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTMxLjEwNzkgMjEuMjIwNkMyNi42NzA2IDIxLjIyMDYgMjMuOTM5OSAxOC4zOTQ5IDIzLjkzOTkgMTIuNzQzM1YxLjExNDI2SDI4LjcxODZWMTIuNzQzM0MyOC43MTg2IDE1LjY3NzggMzAuMTk3NyAxNy4wOTA3IDMyLjcwMDggMTcuMDkwN0MzNy41OTMzIDE3LjA5MDcgMzkuNDEzNyAxMS4zMzA1IDM5LjQxMzcgNy4zMDkxOVYxLjExNDI2SDQ0LjE5MjRWMjAuNzg1OUgzOS41Mjc1VjEzLjUwNDFDMzguNjE3MyAxNy41MjU0IDM2LjExNDEgMjEuMjIwNiAzMS4xMDc5IDIxLjIyMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzIuNzQxMSAwLjc3ODMyQzY4LjY2NDMgMC43NzgzMiA2Ni4wOTI0IDQuNTQwMzcgNjUuMjUyOSA4LjAxODg0QzY1LjEwOTMgMy4zNTcyNyA2Mi43MDk1IDAuNzc4MzIgNTguODY5NyAwLjc3ODMyQzU1LjU1MjIgMC43NzgzMiA1Mi40NzQzIDMuNjA0MzUgNTEuNjc1IDguMDc1MTJWMS4xMTI5Nkg0Ny4wMTY2VjIwLjc4NTFINTEuNzM0N1YxMy43MzI3QzUxLjczNDcgMTEuOTg0MyA1Mi40OTc4IDQuODA5MzkgNTcuMjQ3MyA0LjgwOTM5QzYwLjMyNDEgNC44MDkzOSA2MC42NDQ5IDcuNDYwNDMgNjAuNjQ0OSAxMS4wODQyVjIwLjc4NTFINjUuMzYwN1YxMy43MzI3QzY1LjM2MDcgMTEuOTg0MyA2Ni4xNTU0IDQuODA5MzkgNzAuOTA0OSA0LjgwOTM5QzczLjk3OSA0LjgwOTM5IDc0LjI5NjcgNy40NjA0MyA3NC4yOTY3IDExLjA4NDJWMjAuNzg1MUg3OS4wMTkxVjkuMTQ5MTNDNzkuMDQwOCAzLjU2Njg3IDc2Ljk3NzQgMC43NzgzMiA3Mi43NDExIDAuNzc4MzJaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTAzLjQxNSAwLjc3ODMyQzk3LjMwNjUgMC43NzgzMiA5My4xNjggNS4zNTMxMSA5My4xNjggMTAuOTk5N0M5My4xNjggMTcuMjIxNCA5Ny4xMDQxIDIxLjIyMDkgMTAzLjQxNSAyMS4yMjA5QzEwOS41MjMgMjEuMjIwOSAxMTMuNzM1IDE2LjY0NjMgMTEzLjczNSAxMC45OTk3QzExMy43MzUgNC43NzggMTA5LjcyMiAwLjc3ODMyIDEwMy40MTUgMC43NzgzMlpNMTAzLjQxNSAxNy43Mzg5Qzk5Ljg1ODYgMTcuNzM4OSA5Ny41NTU0IDE0Ljg2MzQgOTcuNTU1NCAxMC45OTk3Qzk3LjU1NTQgNy4xMzU5NyA5OS44NjY4IDQuMjYwMzMgMTAzLjQxNSA0LjI2MDMzQzEwNi45NjIgNC4yNjAzMyAxMDkuMTgxIDcuMTM1OTcgMTA5LjE4MSAxMC45OTk3QzEwOS4xODEgMTQuODYzNCAxMDYuOTYgMTcuNzM4OSAxMDMuNDE1IDE3LjczODlaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K"); } a.gumroad-button { background-color: #000000 !important; border-radius: 4px !important; color: white !important; display: inline-block !important; font-family: "Mabry Pro", -apple-system, ".SFNSDisplay-Regular", "Helvetica Neue", Helvetica, Arial, sans-serif !important; font-size: 16px !important; line-height: 1.3 !important; padding: 14px 16px !important; text-decoration: none !important; border: solid 1px #000000 !important; transition: all 0.14s ease-out !important; } .gumroad-button-logo { height: 13px !important; width: 93px !important; display: inline-block !important; margin-bottom: -1px !important; margin-left: 7px !important; background-color: #ff90e8 !important; mask-image: var(--gumroad-logo) !important; -webkit-mask-image: var(--gumroad-logo) !important; mask-size: contain !important; -webkit-mask-size: contain !important; mask-repeat: no-repeat !important; -webkit-mask-repeat: no-repeat !important; } a.gumroad-button:hover { transform: translate(-4px, -4px) !important; box-shadow: 4px 4px 0px #000000 !important; color: #000000 !important; background: #ff90e8 !important; } a.gumroad-button:hover .gumroad-button-logo { background-color: #000000 !important; } .gumroad-loading-indicator { background: white; border-radius: 50%; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); box-sizing: border-box; display: none; height: 60px; left: 50% !important; margin-left: -30px !important; margin-top: -30px !important; padding: 10px; position: fixed; top: 50% !important; width: 60px; z-index: 99997; } .gumroad-loading-indicator i { background: url("GUMROAD_ORIGIN/js/loading-rainbow.svg"); height: 40px; width: 40px; display: inline-block; background-size: contain; animation: gumroad-spin 1s infinite linear; } .gumroad-scroll-container { -webkit-overflow-scrolling: touch; overflow-y: auto; position: fixed !important; z-index: 99998 !important; top: 0 !important; right: 0 !important; -ms-overflow-style: none; scrollbar-width: none; text-align: start; } .gumroad-scroll-container::-webkit-scrollbar { display: none; } .gumroad-overflow-hidden { overflow: hidden !important; } .gumroad-overlay-iframe { position: absolute; min-width: 100%; min-height: 100%; border: none !important; } @keyframes gumroad-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(359deg); } }'.replace(/GUMROAD_ORIGIN/g,this.domain),e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(t)),this.append(e,"head")}maximizeIframe(t){const e=this.maxWindowHeight||window.innerHeight,i={width:`${window.innerWidth}px`,height:`${e}px`};this.hideLoadingIndicator(),this.setScrollContainerStyle(i),this.disableBodyScroll(),this.resizeIframe(i)}messageIframe(t){this.iframe&&("object"==typeof t&&(t=JSON.stringify(t)),this.iframe.contentWindow.postMessage(t,this.domain))}messagingSetupCallback(){this.askForProduct(),this.messageIframe({overlayMethod:"getPersistentBundle"})}minimizeIframe(t){this.restoreBodyScroll(),this.hideLoadingIndicator(),this.isSingleProductMode?this.setScrollContainerStyle():(this.setScrollContainerStyle(t),this.resizeIframe(t)),this.messageIframe("stopPreviews")}nodeAdditionCallback(){this.resetLinks()}redirect(t){t&&t.match(/^http/)&&(window.location.href=t)}reload(){this.minimizeIframe(),this.resetLinks(),this.removeIframe()}removeIframe(){this.iframe&&(this.iframe.remove(),delete this.iframe,delete this.iframeReady)}resetLinks(){this.links=[],this.addLinks()}resizeIframe(t){if(this.iframe){var e=[];(t=t||{width:"0px",height:"0px"}).width&&e.push("width: "+t.width),t.height&&e.push("height: "+t.height),e.push("max-width: 100%"),this.iframe.style=e.join(";")}}sendDomain(){this.messageIframe({overlayMethod:"setOverlayParentDomain",overlayArgs:this.origin})}setEnvironment(){super.setEnvironment(),this.productMatches=["https://[a-z0-9-]*[a-z][a-z0-9-]*\\.gumroad\\.com/l/","http://gum\\.co/","https://gum\\.co/","https://app\\.gumroad\\.com/l/","https://gumroad\\.com/l/"]}setOpacity(t,e){t.style.display=0===e?"none":"block",t.style.opacity=t.style.MozOpacity=t.style.khtmlOpacity=e,t.style.filter="alpha(opacity="+100*e+");"}setupMessaging(){this.handshakeTimer=setInterval(function(){this.sendDomain()}.bind(this),100)}showInIframe(t){this.currentLink=t,this.showLoadingIndicator(),this.iframeReady?this.askForProduct():this.createIframe()}showLoadingIndicator(){this.setOpacity(this.loadingIndicator,1)}}return t}();window.addEventListener?window.addEventListener("load",createGumroadOverlay):window.attachEvent&&window.attachEvent("onload",createGumroadOverlay);
    </script>
  </body>
</html>
